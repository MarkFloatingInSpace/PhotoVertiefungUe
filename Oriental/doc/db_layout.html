

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Database Layout &mdash; OrientAL manual</title>
  

  
  
    <link rel="shortcut icon" href="_static/oriental.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/oriental.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="MonoScope" href="monoscope.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> OrientAL
          

          
            
            <img src="_static/oriental.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2020-04-29
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="definitions.html">Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="oriental.html">Python Package <em>oriental</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="monoscope.html">MonoScope</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Database Layout</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OrientAL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Database Layout</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="database-layout">
<span id="chapter-db-layout"></span><h1>Database Layout<a class="headerlink" href="#database-layout" title="Permalink to this headline">Â¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>Much of the data generated by <a class="reference internal" href="glossary.html#term-OrientAL"><span class="xref std std-term">OrientAL</span></a> is stored in <a class="reference internal" href="glossary.html#term-SQLite"><span class="xref std std-term">SQLite</span></a> databases, which adhere to following minimal set of tables and <abbr title="respective(ly)">resp.</abbr> table layouts.</p>
<p>Table <em>config</em> contains global project properties in its column <em>value</em>, to be accessed by its column <em>name</em>. Well-known names are defined by <a class="reference internal" href="oriental/utils/db.html#oriental.utils.db._db.ConfigNames" title="oriental.utils.db._db.ConfigNames"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigNames</span></code></a>. If present, the value for name <a class="reference internal" href="oriental/utils/db.html#oriental.utils.db._db.ConfigNames" title="oriental.utils.db._db.ConfigNames"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigNames</span></code></a>.CoordinateSystemWkt <abbr title="exempli gratia">e.g.</abbr> stores the reference coordinate system.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;python3&#39; is not recognized as an internal or external command,
operable program or batch file.
</pre></div>
</div>
<p>Table <em>objpts</em> contains the object points <abbr title="id est">i.e.</abbr> points in the reference coordinate system:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;python3&#39; is not recognized as an internal or external command,
operable program or batch file.
</pre></div>
</div>
<p>Table <em>cameras</em> contains the cameras:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CREATE TABLE &quot;cameras&quot;( 
  id              INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, 
  make            TEXT, 
  model           TEXT, 
  sensorWidth_mm  REAL /*width of the imaged area [mm] - this is independent of the fiducial transformation for scanned images*/, 
  sensorHeight_mm REAL, 
  isDigital       INTEGER, 
  x0              REAL NOT NULL, 
  y0              REAL NOT NULL, 
  z0              REAL NOT NULL, 
  s_x0            REAL CHECK( s_x0 ISNULL OR s_x0 &gt;= 0 ), 
  s_y0            REAL CHECK( s_y0 ISNULL OR s_y0 &gt;= 0 ), 
  s_z0            REAL CHECK( s_z0 ISNULL OR s_z0 &gt;= 0 ), 
  reference       TEXT CHECK( reference IN ( &#39;origin&#39;, &#39;principalPoint&#39; ) ), 
  normalizationRadius REAL CHECK( normalizationRadius &gt; 0 ) , 
affinitySkewnessOfAxes REAL, 
affinityScaleOfYAxis REAL, 
optPolynomRadial3 REAL, 
optPolynomRadial5 REAL, 
optPolynomTangential1 REAL, 
optPolynomTangential2 REAL, 
optPolynomRadial7 REAL, 
optPolynomRadial9 REAL, 
optPolynomRadial11 REAL,
s_affinitySkewnessOfAxes REAL CHECK( s_affinitySkewnessOfAxes ISNULL OR s_affinitySkewnessOfAxes &gt;= 0 ),
s_affinityScaleOfYAxis REAL CHECK( s_affinityScaleOfYAxis ISNULL OR s_affinityScaleOfYAxis &gt;= 0 ),
s_optPolynomRadial3 REAL CHECK( s_optPolynomRadial3 ISNULL OR s_optPolynomRadial3 &gt;= 0 ),
s_optPolynomRadial5 REAL CHECK( s_optPolynomRadial5 ISNULL OR s_optPolynomRadial5 &gt;= 0 ),
s_optPolynomTangential1 REAL CHECK( s_optPolynomTangential1 ISNULL OR s_optPolynomTangential1 &gt;= 0 ),
s_optPolynomTangential2 REAL CHECK( s_optPolynomTangential2 ISNULL OR s_optPolynomTangential2 &gt;= 0 ),
s_optPolynomRadial7 REAL CHECK( s_optPolynomRadial7 ISNULL OR s_optPolynomRadial7 &gt;= 0 ),
s_optPolynomRadial9 REAL CHECK( s_optPolynomRadial9 ISNULL OR s_optPolynomRadial9 &gt;= 0 ),
s_optPolynomRadial11 REAL CHECK( s_optPolynomRadial11 ISNULL OR s_optPolynomRadial11 &gt;= 0 )
)
</pre></div>
</div>
<p>Table <em>images</em> contains the images. Perspective images reference cameras:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CREATE TABLE &quot;images&quot;( 
  -- camID, X0, Y0, Z0, r1, r2, r3, parameterization are NULL for non-perspective images 
  id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, 
  camId  INTEGER REFERENCES cameras(id), 
  path   TEXT NOT NULL UNIQUE /*a GDAL data source*/, 
  nCols  INTEGER /* Number of columns of the digital or scanned image. For scanned images taken with the same camera, nCols may vary, depending on the scanner. */, 
  nRows  INTEGER, 
  X0     REAL, 
  Y0     REAL, 
  Z0     REAL, 
  s_X0 REAL CHECK( s_X0 ISNULL OR s_X0 &gt;= 0 ), 
  s_Y0 REAL CHECK( s_Y0 ISNULL OR s_Y0 &gt;= 0 ), 
  s_Z0 REAL CHECK( s_Z0 ISNULL OR s_Z0 &gt;= 0 ), 
  r1 REAL, 
  r2 REAL, 
  r3 REAL, 
  s_r1 REAL CHECK( s_r1 ISNULL OR s_r1 &gt;= 0 ), 
  s_r2 REAL CHECK( s_r2 ISNULL OR s_r2 &gt;= 0 ), 
  s_r3 REAL CHECK( s_r3 ISNULL OR s_r3 &gt;= 0 ), 
  parameterization TEXT CHECK(parameterization ISNULL OR parameterization IN ( &#39;omfika&#39;, &#39;alzeka&#39;, &#39;alnuka&#39;, &#39;ropiya&#39; ) ), 
  fiducial_A00 REAL /* fiducial transformation parameters may be NULL, indicating the identity transform. */, 
  fiducial_A01 REAL /* first row, second column. */, 
  fiducial_A10 REAL, 
  fiducial_A11 REAL, 
  fiducial_t0 REAL, 
  fiducial_t1 REAL, 
  mask        POLYGON /* Polygon of valid image content within the image in OrientAL image CS. Usually not NULL for scanned images.*/ 
)
</pre></div>
</div>
<p>Table <em>imgobs</em> contains image point observations. Each image point references an image. Image Points may reference object points:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CREATE TABLE &quot;imgobs&quot;( 
  id      INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
  imgId   INTEGER NOT NULL REFERENCES images(id),  
  name    TEXT /* Optional. Usually, but not necessarily unique within an image. Points with same name in same image may be present e.g. in overlapping areas of merged sub-blocks. */, 
  x       REAL    NOT NULL, 
  y       REAL    NOT NULL, 
  sx      REAL, 
  sy      REAL, 
  objPtId INTEGER REFERENCES objpts(id) /* Optional. May never be assigned: e.g. for non-homologous points on a line in object space, an object point may never be triangulated. */, 
  type    INTEGER /* See oriental.ObservationMode. */, 
  refId   INTEGER REFERENCES imgobs(id) /* Optional. For type=Lsm, this e.g. gives the manual observation in a mosaic that was transferred to this image using LSM.*/, 
  red     INTEGER /* red channel   [0,255] */, 
  green   INTEGER /* green channel [0,255] */, 
  blue    INTEGER /* blue channel  [0,255] */, 
  angle REAL, 
  diameter REAL, 
  created DATETIME DEFAULT (datetime(&#39;now&#39;,&#39;localtime&#39;)), 
  changed DATETIME DEFAULT (datetime(&#39;now&#39;,&#39;localtime&#39;))  
)
</pre></div>
</div>
<p>Table <em>homographies</em> may define homographic transformations between pairs of images:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CREATE TABLE &quot;homographies&quot; ( 
    /* Defines a homography from image with ID &#39;src&#39; to image with ID &#39;dest&#39; 
    â      â   â           â â     â 
    âdest_xâ   âh00 h01 h02â âsrc_xâ 
    âdest_yâ = âh10 h11 h12â âsrc_yâ 
    â  w   â   âh20 h21 h22â â  1  â 
    â      â   â           â â     â 
    */ 
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
    src INTEGER NOT NULL REFERENCES images(id), 
    dest INTEGER NOT NULL REFERENCES images(id), 
    h00 REAL NOT NULL, 
    h01 REAL NOT NULL, 
    h02 REAL NOT NULL, 
    h10 REAL NOT NULL, 
    h11 REAL NOT NULL, 
    h12 REAL NOT NULL, 
    h20 REAL NOT NULL, 
    h21 REAL NOT NULL, 
    h22 REAL NOT NULL  
)
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="glossary.html" class="btn btn-neutral float-right" title="Glossary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="monoscope.html" class="btn btn-neutral float-left" title="MonoScope" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2020 GEO - Dept. of Geodesy and Geoinformation, TU Wien, and VIAS - Vienna Institute for Archaeological Science, Univ. Vienna, Austria

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>